<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Select Reward | It's Pure Veda</title>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            /* Updated Colors to match your Logo Image */
            --green-logo-text: #0b3b2d; /* Deep Dark Green */
            --green-logo-icon: #2d6a4f; /* Leaf Green */
            
            --green-darkest: #022c22; 
            --green-dark: #14532d; 
            --green-main: #166534;
            --gold-accent: #d97706; 
            --gold-bright: #fbbf24;
            --font-heading: 'Playfair Display', serif; 
            --font-body: 'Plus Jakarta Sans', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: var(--font-body); 
            color: var(--green-darkest);
            background: radial-gradient(circle at 50% 0%, #fff7ed 0%, #fef2f2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* --- BACKGROUND ANIMATION --- */
        .bg-orb {
            position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: 0.6;
            animation: floatOrb 10s infinite ease-in-out alternate;
        }
        .orb-1 { width: 300px; height: 300px; background: #dcfce7; top: -50px; left: -50px; }
        .orb-2 { width: 400px; height: 400px; background: #fff7ed; bottom: 10%; right: -100px; animation-delay: 2s; }
        @keyframes floatOrb { 0% { transform: translateY(0); } 100% { transform: translateY(-40px); } }

        /* --- NAVIGATION & LOGO --- */
        nav {
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03); position: sticky; top: 0; z-index: 100;
        }

        /* UPDATED LOGO STYLES */
        .logo { 
            font-family: var(--font-heading); 
            font-size: 1.8rem; 
            font-weight: 800; /* Bold like the image */
            color: var(--green-logo-text); 
            display: flex; 
            align-items: center; 
            gap: 8px;
            letter-spacing: -0.5px; /* Tight lettering for logo feel */
        }
        .logo i { 
            color: var(--green-logo-icon); 
            font-size: 1.5rem;
            transform: rotate(-10deg) translateY(2px); /* Slight tilt to match image */
        }

        .btn-back {
            text-decoration: none; color: var(--green-dark); font-weight: 600; font-size: 0.9rem;
            display: flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 30px;
            background: rgba(22, 101, 52, 0.05); transition: 0.3s;
        }
        .btn-back:hover { background: var(--green-main); color: white; }

        /* --- HEADER --- */
        .claim-header { text-align: center; padding: 50px 20px 30px; animation: fadeInDown 0.8s ease-out; }
        .claim-header h1 { font-family: var(--font-heading); font-size: 3rem; margin-bottom: 15px; }
        .claim-header p { font-size: 1.1rem; color: #555; max-width: 500px; margin: 0 auto; }
        .highlight { color: var(--gold-accent); position: relative; display: inline-block; }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- REWARDS GRID --- */
        .rewards-section { padding: 20px 5% 80px; max-width: 1200px; margin: 0 auto; }
        .rewards-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; padding-top: 20px;
        }

        /* --- CARD DESIGN --- */
        .gift-card-new {
            background: white; border: 1px solid rgba(0,0,0,0.05); border-radius: 20px;
            overflow: hidden; display: flex; flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.04);
            transition: all 0.4s ease; position: relative;
        }
        .gift-card-new:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(22, 101, 52, 0.15); }

        .gc-img-container {
            height: 220px; background: radial-gradient(circle at center, #ffffff, #f7f7f7);
            display: flex; justify-content: center; align-items: center; position: relative;
            cursor: pointer; overflow: hidden;
        }
        .gc-img { max-height: 80%; max-width: 80%; object-fit: contain; transition: 0.5s ease; }
        .gift-card-new:hover .gc-img { transform: scale(1.1); }
        
        .zoom-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.1); opacity: 0; transition: 0.3s;
            display: flex; justify-content: center; align-items: center;
        }
        .zoom-icon {
            background: white; padding: 12px; border-radius: 50%;
            color: var(--green-darkest); font-size: 1.2rem;
            transform: scale(0); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .gc-img-container:hover .zoom-overlay { opacity: 1; }
        .gc-img-container:hover .zoom-icon { transform: scale(1); }

        .gc-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; text-align: center; }
        .gc-title { font-family: var(--font-heading); font-size: 1.3rem; margin-bottom: 5px; }
        .gc-desc { font-size: 0.9rem; color: #666; margin-bottom: 15px; }
        .price-tag { background: #f0fdf4; border: 1px solid #dcfce7; padding: 6px 12px; border-radius: 10px; display: inline-block; margin: 0 auto 15px; }
        .gc-price-free { color: var(--green-main); font-weight: 700; }
        .gc-price-strike { font-size: 0.85rem; text-decoration: line-through; color: #94a3b8; margin-right: 8px; }

        .btn-redeem-fixed {
            width: 100%; padding: 12px; border: none; border-radius: 50px;
            background: linear-gradient(135deg, var(--gold-accent) 0%, var(--gold-bright) 100%);
            color: white; font-weight: 700; cursor: pointer;
            display: flex; justify-content: center; align-items: center; gap: 8px;
            margin-top: auto; box-shadow: 0 8px 20px rgba(217, 119, 6, 0.25); 
            transition: 0.3s;
        }
        .btn-redeem-fixed:hover { transform: scale(1.02); box-shadow: 0 12px 25px rgba(217, 119, 6, 0.4); }

        /* --- MODAL (PRODUCT DETAILS POPUP) --- */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 2000; opacity: 0; visibility: hidden;
            transition: 0.3s ease; display: flex; justify-content: center; align-items: center;
        }
        .modal-active { opacity: 1; visibility: visible; }

        .modal-card {
            background: white; width: 90%; max-width: 900px; max-height: 90vh;
            border-radius: 20px; overflow: hidden;
            display: grid; grid-template-columns: 1fr 1fr;
            box-shadow: 0 25px 50px rgba(0,0,0,0.25);
            transform: scale(0.9); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        .modal-active .modal-card { transform: scale(1); }

        .modal-close {
            position: absolute; top: 15px; right: 15px; z-index: 10;
            background: #f1f5f9; width: 35px; height: 35px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; color: #64748b; transition: 0.2s;
        }
        .modal-close:hover { background: #e2e8f0; color: #ef4444; }

        .modal-img-area {
            background: #f8fafc; display: flex; justify-content: center; align-items: center;
            padding: 30px; position: relative;
        }
        .modal-img { max-width: 100%; max-height: 400px; object-fit: contain; filter: drop-shadow(0 15px 25px rgba(0,0,0,0.1)); }
        
        .modal-details { padding: 40px; overflow-y: auto; display: flex; flex-direction: column; justify-content: center; }
        .modal-tag { color: var(--gold-accent); font-weight: 700; font-size: 0.9rem; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 10px; }
        .modal-title { font-family: var(--font-heading); font-size: 2.5rem; color: var(--green-darkest); margin-bottom: 15px; line-height: 1.1; }
        .modal-desc { font-size: 1rem; color: #64748b; line-height: 1.6; margin-bottom: 25px; }
        
        .feature-list { list-style: none; margin-bottom: 30px; }
        .feature-list li { margin-bottom: 8px; display: flex; align-items: center; gap: 10px; color: #475569; }
        .feature-list li i { color: var(--green-main); }

        .modal-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid #e2e8f0; }
        .btn-modal-claim {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: var(--green-main); color: white; font-size: 1.1rem; font-weight: 600;
            cursor: pointer; transition: 0.3s; display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .btn-modal-claim:hover { background: var(--green-dark); box-shadow: 0 10px 20px rgba(22, 101, 52, 0.3); }

        /* --- MOBILE OPTIMIZATION --- */
        @media(max-width: 768px) {
            .rewards-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .gc-img-container { height: 160px; }
            .gc-title { font-size: 1.1rem; }
            .zoom-overlay { display: none; } 

            .modal-card { grid-template-columns: 1fr; overflow-y: auto; max-height: 95vh; }
            .modal-img-area { padding: 20px; height: 250px; background: white; }
            .modal-img { max-height: 200px; }
            .modal-details { padding: 25px; }
            .modal-title { font-size: 1.8rem; }
            .modal-close { top: 10px; right: 10px; background: rgba(0,0,0,0.1); }
        }

        @media(max-width: 480px) {
            .rewards-grid { grid-template-columns: 1fr; }
            .claim-header h1 { font-size: 2.2rem; }
            .logo { font-size: 1.5rem; }
        }

        /* Confetti */
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
    </style>
</head>
<body>

    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <canvas id="confetti-canvas"></canvas>

    <nav>
        <!-- UPDATED LOGO STRUCTURE -->
        <div class="logo">
            <i class="fas fa-leaf"></i> It's Pure Veda
        </div>
        
        <a href="index.html" class="btn-back"><i class="fas fa-chevron-left"></i> <span>Shop</span></a>
    </nav>

    <header class="claim-header">
        <h1>Your <span class="highlight">Gift Lounge</span></h1>
        <p>Click on any gift to see details in full size.</p>
    </header>

    <section class="rewards-section">
        <div class="rewards-grid" id="rewardsGrid">
            <!-- Dynamic Cards -->
        </div>
    </section>

    <!-- PRODUCT DETAIL MODAL -->
    <div class="modal-backdrop" id="productModal" onclick="closeModal(event)">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-close" onclick="closeModal(event)"><i class="fas fa-times"></i></div>
            
            <div class="modal-img-area">
                <img src="" alt="" class="modal-img" id="modalImg">
            </div>
            
            <div class="modal-details">
                <div class="modal-tag">Free with your order</div>
                <h2 class="modal-title" id="modalTitle">Product Title</h2>
                <p class="modal-desc" id="modalDesc">Product description goes here.</p>
                
                <ul class="feature-list">
                    <li><i class="fas fa-check-circle"></i> Premium Quality Material</li>
                    <li><i class="fas fa-check-circle"></i> Exclusive Member Gift</li>
                    <li><i class="fas fa-check-circle"></i> Limited Time Offer</li>
                </ul>

                <div class="modal-footer">
                    <div class="price-tag" style="margin-bottom: 15px; display:block; width: fit-content;">
                        <span class="gc-price-strike">₹999</span>
                        <span class="gc-price-free" style="font-size: 1.2rem;">FREE</span>
                    </div>
                    <button class="btn-modal-claim" id="modalClaimBtn">
                        Claim This Gift <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const defaultRewards = [
            { title: "Eco Thermoware", desc: "Premium insulated 3pc container set for keeping meals fresh.", img: "https://images.unsplash.com/photo-1584269614539-772922616f06?w=600&q=80" },
            { title: "Royal Casserole", desc: "A majestic casserole dish designed to keep curries warm.", img: "https://images.unsplash.com/photo-1596708681944-a63e6a2b254a?w=600&q=80" },
            { title: "Insulated Flask", desc: "Double-wall vacuum steel bottle, keeps water cold for 24h.", img: "https://images.unsplash.com/photo-1602143407151-011141950038?w=600&q=80" },
            { title: "Bento Lunch Box", desc: "Japanese style lunch box with multiple compartments.", img: "https://images.unsplash.com/photo-1604335198950-c8f07be89b09?w=600&q=80" },
            { title: "Bamboo Cutlery", desc: "Sustainable travel cutlery set with a travel pouch.", img: "https://images.unsplash.com/photo-1584992236310-6eddd724a4c7?w=600&q=80" }
        ];

        // --- LOAD GRID ---
        function loadRewards() {
            const container = document.getElementById('rewardsGrid');
            const stored = localStorage.getItem('pureVedaData');
            let rewards = defaultRewards;

            if (stored) {
                try {
                    const db = JSON.parse(stored);
                    if (db.rewards && db.rewards.length > 0) rewards = db.rewards;
                } catch(e) {}
            }

            container.innerHTML = '';
            
            rewards.forEach((item, index) => {
                let imgSrc = item.img || (item.images && item.images[0]) || 'https://via.placeholder.com/400';
                const safeItem = JSON.stringify(item).replace(/"/g, '&quot;');

                const card = document.createElement('div');
                card.className = 'gift-card-new';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <div class="gc-img-container" onclick="openModal(null, ${safeItem})">
                        <div class="zoom-overlay"><i class="fas fa-search-plus zoom-icon"></i></div>
                        <img src="${imgSrc}" alt="${item.title}" class="gc-img">
                    </div>
                    <div class="gc-content">
                        <h3 class="gc-title">${item.title}</h3>
                        <p class="gc-desc">${item.desc.substring(0, 50)}...</p>
                        <div class="price-tag">
                            <span class="gc-price-strike">₹999</span>
                            <span class="gc-price-free">FREE</span>
                        </div>
                        <button class="btn-redeem-fixed" onclick="handleRedeem(this, '${item.title}')">
                            <span>Claim</span> <i class="fas fa-gift"></i>
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- MODAL FUNCTIONS ---
        function openModal(e, item) {
            const modal = document.getElementById('productModal');
            const img = document.getElementById('modalImg');
            const title = document.getElementById('modalTitle');
            const desc = document.getElementById('modalDesc');
            const btn = document.getElementById('modalClaimBtn');

            let imgSrc = item.img || (item.images && item.images[0]) || '';
            img.src = imgSrc;
            title.innerText = item.title;
            desc.innerText = item.desc;
            
            btn.onclick = function() { handleRedeem(this, item.title); };
            btn.innerHTML = `Claim This Gift <i class="fas fa-arrow-right"></i>`;
            btn.style.background = "var(--green-main)";

            modal.classList.add('modal-active');
            document.body.style.overflow = 'hidden'; 
        }

        function closeModal(e) {
            const modal = document.getElementById('productModal');
            modal.classList.remove('modal-active');
            document.body.style.overflow = 'auto'; 
        }

        // --- REDEEM LOGIC ---
        function handleRedeem(btn, giftName) {
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Processing...`;
            fireConfetti();
            setTimeout(() => {
                const encodedGift = encodeURIComponent(giftName);
                window.location.href = `form.html?gift=${encodedGift}`;
            }, 1500);
        }

        // --- CONFETTI ---
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            const colors = ['#d97706', '#166534', '#4ade80'];

            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: canvas.width / 2, y: canvas.height / 2,
                    r: Math.random() * 6 + 2,
                    dx: (Math.random() - 0.5) * 20, dy: (Math.random() - 0.5) * 20,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    life: 100
                });
            }
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                particles.forEach(p => {
                    if (p.life > 0) {
                        active = true;
                        p.x += p.dx; p.y += p.dy; p.dy += 0.5; p.life -= 1.5; p.r *= 0.96;
                        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                        ctx.fillStyle = p.color; ctx.fill();
                    }
                });
                if (active) requestAnimationFrame(animate);
                else ctx.clearRect(0,0,canvas.width, canvas.height);
            }
            animate();
        }

        window.addEventListener('DOMContentLoaded', loadRewards);
    </script>
</body>
</html>
